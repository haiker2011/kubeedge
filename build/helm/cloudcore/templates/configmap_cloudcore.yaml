apiVersion: v1
kind: ConfigMap
metadata:
  name: cloudcore
  {{- with .Values.cloudCore.labels }}
  labels: {{- toYaml . | nindent 4 }}
  {{- end }}
data:
  cloudcore.yaml: |
    apiVersion: cloudcore.config.kubeedge.io/v1alpha2
    kind: CloudCore
    kubeAPIConfig:
      kubeConfig: ""
      master: ""
    modules:
      cloudHub:
        advertiseAddress:
        {{- range .Values.cloudCore.modules.cloudHub.advertiseAddress }}
        - {{  .  }}
        {{- end}}
        nodeLimit: {{ .Values.cloudCore.modules.cloudHub.nodeLimit }}
        tlsCAFile: {{ .Values.cloudCore.modules.cloudHub.tlsCAFile }}
        tlsCertFile: {{ .Values.cloudCore.modules.cloudHub.tlsCertFile }}
        tlsPrivateKeyFile: {{ .Values.cloudCore.modules.cloudHub.tlsPrivateKeyFile }}
        unixsocket:
          address: {{ .Values.cloudCore.modules.cloudHub.unixsocket.address }}
          enable: {{ .Values.cloudCore.modules.cloudHub.unixsocket.enable }}
        websocket:
          address: {{ .Values.cloudCore.modules.cloudHub.websocket.address }}
          enable: {{ .Values.cloudCore.modules.cloudHub.websocket.enable }}
          port: {{ .Values.cloudCore.modules.cloudHub.websocket.port }}
        quic:
          address: {{ .Values.cloudCore.modules.cloudHub.quic.address }}
          enable: {{ .Values.cloudCore.modules.cloudHub.quic.enable }}
          maxIncomingStreams: {{ .Values.cloudCore.modules.cloudHub.quic.maxIncomingStreams }}
          port: {{ .Values.cloudCore.modules.cloudHub.quic.port }}
        https:
          address: {{ .Values.cloudCore.modules.cloudHub.https.address }}
          enable: {{ .Values.cloudCore.modules.cloudHub.https.enable }}
          port: {{ .Values.cloudCore.modules.cloudHub.https.port }}
      cloudStream:
        enable: {{ .Values.cloudCore.modules.cloudStream.enable }}
        streamPort: {{ .Values.cloudCore.modules.cloudStream.streamPort }}
        tunnelPort: {{ .Values.cloudCore.modules.cloudStream.tunnelPort }}
      dynamicController:
        enable: {{ .Values.cloudCore.modules.dynamicController.enable }}
      router:
        enable: {{ .Values.cloudCore.modules.router.enable }}
